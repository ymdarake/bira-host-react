rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // adminコレクション内のドキュメントへのアクセス制御
    match /admin/{documentId} {
      // 読み取り許可条件:
      // 1. 認証済みであること
      // 2. 取得しようとしているドキュメントの userUid フィールドが、リクエストしたユーザーのUIDと一致すること
      allow read: if request.auth != null && resource.data.userUid == request.auth.uid;
      
      // 書き込みは現状禁止（手動運用）
      allow write: if false; 
    }

    match /{document=**} {
			allow read;
			allow write: if request.auth != null &&
        request.auth.token.email_verified &&
				(request.auth.uid == 'mmVmpiRut4VVWmGs871naSflbUp2'
         || request.auth.uid == '9c3GEV7pXydKDwJMM0HBcPWHo8f2'
         || request.auth.uid == 'en18iQfAnQXdQfeP0Be89VtfFWO2'
         || request.auth.uid == 'POI0OwLFpyXmAlNLXkdNGGLFog13'
         || request.auth.uid == 'BMdRsJzMfvSp5EHBv6wI9rYwYxy1'
         || request.auth.uid == '9DylOzLRA0UTIfR1hLBWQIXdGbQ2');
    }
  }
}